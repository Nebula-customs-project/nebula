# =============================================================================
# Gateway Service - Docker Profile Configuration
# Uses direct service URLs instead of Eureka service discovery
# =============================================================================

spring:
  config:
    import: ""
  cloud:
    gateway:
      discovery:
        locator:
          enabled: false
      # globalcors:
      #   cors-configurations:
      #     '[/**]':
      #       allowedOrigins: "*"
      #       allowedMethods:
      #         - GET
      #         - POST
      #         - PUT
      #         - DELETE
      #         - OPTIONS
      #       allowedHeaders: "*"
      routes:
        # User Service Routes
        - id: user-service
          uri: http://user-service:8083
          predicates:
            - Path=/api/users/**

        # World-View Service Routes
        - id: world-view-routes
          uri: http://world-view:8082
          predicates:
            - Path=/api/v1/routes/**

        - id: world-view-journeys
          uri: http://world-view:8082
          predicates:
            - Path=/api/v1/journeys/**

        # Vehicle Service Routes
        - id: vehicle-service-vehicles
          uri: http://vehicle-service:8081
          predicates:
            - Path=/api/v1/vehicles/**

        # Merchandise Service Routes
        - id: merchandise-service-products
          uri: http://merchandise-service:8084
          predicates:
            - Path=/api/v1/merchandise/**

        - id: merchandise-service-cart
          uri: http://merchandise-service:8084
          predicates:
            - Path=/api/v1/cart/**
        # User Vehicle Service Routes
        - id: user-vehicle-service
          uri: http://user-vehicle-service:8085
          predicates:
            - Path=/api/v1/user-vehicle/**

        # User Vehicle Service WebSocket Route (Vehicle Telemetry)
        - id: user-vehicle-websocket
          uri: ws://user-vehicle-service:8085
          predicates:
            - Path=/ws/vehicle-telemetry

eureka:
  client:
    enabled: false
    register-with-eureka: false
    fetch-registry: false

logging:
  level:
    root: INFO
    pse.nebula: INFO
    pse.nebula.gateway.security: DEBUG
    org.springframework.cloud.gateway: DEBUG
    org.springframework.web.reactive.function.client: DEBUG
