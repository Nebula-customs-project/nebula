# =============================================================================
# World View Service Configuration
# Service for driving route simulation to Porsche Zentrum Stuttgart
# =============================================================================
# Database config comes from Config Server via shared-database profile
# Only service-specific overrides (like schema) are defined here
# =============================================================================

spring:
  profiles:
    active: dev

  application:
    name: world-view

  # Import configurations from Config Server
  config:
    import: optional:configserver:http://localhost:8761

  # Activate shared-database profile to get DB credentials from config server
  profiles:
    active: shared-database

  # ============ SERVICE-SPECIFIC OVERRIDES ONLY ============
  # Override datasource URL to add this service's schema
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5434}/${DB_NAME:nebula_db}?currentSchema=world_view

  # Override JPA for this service's schema
  jpa:
    properties:
      hibernate:
        default_schema: world_view
        dialect: org.hibernate.dialect.PostgreSQLDialect


# Server Configuration
server:
  port: ${SERVER_PORT:8082}

# Service-specific Eureka instance configuration
eureka:
  instance:
    hostname: localhost
    instance-id: ${spring.application.name}:${server.port}

# Service-specific Logging
logging:
  level:
    root: INFO
    pse.nebula.worldview: INFO
    # Suppress noisy framework logs
    org.hibernate: WARN
    org.hibernate.SQL: WARN
    com.zaxxer.hikari: WARN
    org.springframework: WARN
    org.apache: WARN

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when-authorized

# Application Info
info:
  app:
    name: World View Service
    description: Driving route simulation service
    version: 1.0.0

# Journey Configuration (Auto-managed journeys)
journey:
  scheduler:
    update-interval-ms: ${JOURNEY_UPDATE_INTERVAL:2000}
    default-speed-mps: ${JOURNEY_DEFAULT_SPEED:13.89}
    delay-between-journeys-ms: ${JOURNEY_DELAY_BETWEEN:5000}

# Route Configuration (Service-specific)
route:
  dealership:
    name: Dealership
    latitude: 48.8354
    longitude: 9.1520

# MQTT Topic Override (Service-specific)
mqtt:
  client:
    id: world-view-mqtt-client
  topic:
    prefix: nebula/journey
